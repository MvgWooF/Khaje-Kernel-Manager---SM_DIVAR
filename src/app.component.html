
<div class="flex h-screen w-screen bg-gray-950 text-white font-sans selection:bg-primary selection:text-white overflow-hidden">
  
  <!-- Mobile Overlay (Backdrop) -->
  @if (sidebarOpen()) {
    <div class="fixed inset-0 z-40 bg-black/60 backdrop-blur-sm md:hidden transition-opacity" 
         (click)="sidebarOpen.set(false)"></div>
  }

  <!-- Sidebar Navigation -->
  <!-- 
     Desktop: relative, visible, w-64
     Mobile: fixed, z-50, w-72, transform hidden via translate unless open
  -->
  <aside class="fixed inset-y-0 left-0 z-50 w-72 bg-gray-900 border-r border-gray-800 flex flex-col transition-transform duration-300 ease-in-out md:relative md:translate-x-0 md:w-64"
         [class.-translate-x-full]="!sidebarOpen()"
         [class.translate-x-0]="sidebarOpen()">
    
    <!-- Sidebar Header -->
    <div class="p-6 border-b border-gray-800 flex justify-between items-start">
      <div>
        <h1 class="text-xl font-black tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-primary to-secondary">
          Khaje KERNEL
          <span class="block text-xs font-medium text-gray-500 tracking-normal mt-1">MANAGER v5.1</span>
        </h1>
        <div class="mt-2 text-[10px] font-mono text-gray-600">SM_DIVAR (Khaje)</div>
      </div>
      <!-- Close Button (Mobile Only) -->
      <button class="md:hidden text-gray-400 hover:text-white" (click)="sidebarOpen.set(false)">
        <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
      </button>
    </div>

    <!-- Navigation Links -->
    <nav class="flex-1 overflow-y-auto py-4">
      <ul class="space-y-1 px-3">
        <li>
          <button (click)="navigate('cpu')" class="nav-btn" [class.active]="activeTab() === 'cpu'">
            <svg class="w-5 h-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"/></svg>
            CPU & Планировщик
          </button>
        </li>
        <li>
          <button (click)="navigate('gpu')" class="nav-btn" [class.active]="activeTab() === 'gpu'">
            <svg class="w-5 h-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
            Графика (GPU)
          </button>
        </li>
        <li>
          <button (click)="navigate('memory')" class="nav-btn" [class.active]="activeTab() === 'memory'">
            <svg class="w-5 h-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"/></svg>
            Память & I/O
          </button>
        </li>
        <li>
          <button (click)="navigate('power')" class="nav-btn" [class.active]="activeTab() === 'power'">
            <svg class="w-5 h-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
            Питание & Термал
          </button>
        </li>
        <li>
          <button (click)="navigate('audio')" class="nav-btn" [class.active]="activeTab() === 'audio'">
            <svg class="w-5 h-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"/></svg>
            Аудио & Профили
          </button>
        </li>
        <li>
          <button (click)="navigate('files')" class="nav-btn" [class.active]="activeTab() === 'files'">
            <svg class="w-5 h-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"/></svg>
            Файлы (Root)
          </button>
        </li>
        <li>
          <button (click)="navigate('soc')" class="nav-btn" [class.active]="activeTab() === 'soc'">
            <svg class="w-5 h-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
            Инфо
          </button>
        </li>
      </ul>
    </nav>
    
    <div class="p-4 border-t border-gray-800 text-[10px] text-gray-600 text-center">
       &copy; 2023 TopNotchFreaks
    </div>
  </aside>

  <!-- Main Content Wrapper -->
  <div class="flex-1 flex flex-col min-w-0 overflow-hidden bg-gray-950">
    
    <!-- Mobile Header (Visible only on small screens) -->
    <header class="h-14 bg-gray-900 border-b border-gray-800 flex items-center justify-between px-4 md:hidden shrink-0 z-10">
      <div class="flex items-center">
        <button (click)="sidebarOpen.set(true)" class="text-gray-400 hover:text-white mr-3">
          <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" /></svg>
        </button>
        <span class="font-bold text-white text-sm truncate max-w-[200px]">{{tabName()}}</span>
      </div>
      <div class="w-2 h-2 rounded-full bg-primary animate-pulse"></div>
    </header>

    <!-- Desktop Header (Visible only on medium+ screens) -->
    <header class="hidden md:flex h-16 border-b border-gray-800 bg-gray-900/50 backdrop-blur items-center justify-between px-6 shrink-0 z-10">
      <h2 class="text-lg font-semibold text-white capitalize">{{tabName()}}</h2>
      <div class="flex items-center space-x-2 text-xs font-mono">
         <div class="w-2 h-2 rounded-full bg-primary animate-pulse"></div>
         <span class="text-gray-400">System Online</span>
      </div>
    </header>

    <!-- Content Area -->
    <main class="flex-1 overflow-y-auto relative scroll-smooth">
      @if (activeTab() === 'cpu') { <app-cpu-detail /> }
      @if (activeTab() === 'gpu') { <app-gpu-detail /> }
      @if (activeTab() === 'memory') { <app-memory-io /> }
      @if (activeTab() === 'power') { <app-thermal-battery /> }
      @if (activeTab() === 'audio') { <app-audio-profiles /> }
      @if (activeTab() === 'files') { <app-file-manager /> }
      @if (activeTab() === 'soc') { <app-soc-info /> }
    </main>
  </div>

</div>

<style>
  .nav-btn {
    @apply w-full text-left px-4 py-3 rounded-lg flex items-center transition-colors text-gray-400 hover:bg-gray-800 hover:text-white text-sm font-medium;
  }
  .nav-btn.active {
    @apply bg-gray-800 text-primary border-r-2 border-primary;
  }
</style>
